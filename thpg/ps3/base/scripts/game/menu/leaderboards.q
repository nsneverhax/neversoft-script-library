leaderboard_version = 4
master_leaderboard_stat_list = [
	{
		leaderboard_id = Best_Grind_Record
		columns = 3
		title = "Best Grind"
		headers = [
			"RANK"
			"GAMERTAG"
			"FEET"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = Best_Manual_Record
		columns = 3
		title = "Best Manual"
		headers = [
			"RANK"
			"GAMERTAG"
			"FEET"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = Best_Combo_Record
		columns = 3
		title = "Highest Combo"
		headers = [
			"RANK"
			"GAMERTAG"
			"POINTS"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = cash_earned
		columns = 3
		title = "Cash Earned"
		headers = [
			"RANK"
			"GAMERTAG"
			"CASH"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
]
ps3_master_leaderboard_stat_list = [
	{
		leaderboard_id = Best_Grind_Record
		columns = 3
		title = "Best Grind"
		headers = [
			"RANK"
			"NAME"
			"FEET"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = Best_Manual_Record
		columns = 3
		title = "Best Manual"
		headers = [
			"RANK"
			"NAME"
			"FEET"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = Best_Combo_Record
		columns = 3
		title = "Highest Combo"
		headers = [
			"RANK"
			"NAME"
			"POINTS"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = cash_earned
		columns = 3
		title = "Cash Earned"
		headers = [
			"RANK"
			"NAME"
			"CASH"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
]
master_leaderboard_video_edit_list = [
	{
		leaderboard_id = M_edit_philly
		columns = 3
		title = "monthly philly video"
		headers = [
			"RANK"
			"GAMERTAG"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = M_edit_baltimore
		columns = 3
		title = "monthly baltimore video"
		headers = [
			"RANK"
			"GAMERTAG"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = M_edit_dc
		columns = 3
		title = "monthly dc video"
		headers = [
			"RANK"
			"GAMERTAG"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = M_edit_skatelounge
		columns = 3
		title = "skate lounge video"
		headers = [
			"RANK"
			"GAMERTAG"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
]
ps3_master_leaderboard_video_edit_list = [
	{
		leaderboard_id = M_edit_philly
		columns = 3
		title = "philly video"
		headers = [
			"RANK"
			"NAME"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = M_edit_baltimore
		columns = 3
		title = "baltimore video"
		headers = [
			"RANK"
			"NAME"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = M_edit_dc
		columns = 3
		title = "dc video"
		headers = [
			"RANK"
			"NAME"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = M_edit_skatelounge
		columns = 3
		title = "skate lounge video"
		headers = [
			"RANK"
			"NAME"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
]
master_leaderboard_multiplayer_list = [
	{
		leaderboard_id = nettrickattack
		columns = 3
		title = "TRICK ATTACK"
		headers = [
			"RANK"
			"GAMERTAG"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = netscorechallenge
		columns = 3
		title = "SCORE CHALLENGE"
		headers = [
			"RANK"
			"GAMERTAG"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = netcombochallenge
		columns = 3
		title = "COMBO CHALLENGE"
		headers = [
			"RANK"
			"GAMERTAG"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = netcombomambo
		columns = 3
		title = "COMBO MAMBO"
		headers = [
			"RANK"
			"GAMERTAG"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = netgraffiti
		columns = 3
		title = "GRAFFITI"
		headers = [
			"RANK"
			"GAMERTAG"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = netwalls
		columns = 3
		title = "WALLS"
		headers = [
			"RANK"
			"GAMERTAG"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = net_line
		columns = 3
		title = "SKATE THE LINE"
		headers = [
			"RANK"
			"GAMERTAG"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = net_nail
		columns = 3
		title = "NAIL THE TRICK"
		headers = [
			"RANK"
			"GAMERTAG"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
]
ps3_master_leaderboard_multiplayer_list = [
	{
		leaderboard_id = nettrickattack
		columns = 3
		title = "TRICK ATTACK"
		headers = [
			"RANK"
			"NAME"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = netscorechallenge
		columns = 3
		title = "SCORE CHALLENGE"
		headers = [
			"RANK"
			"NAME"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = netcombochallenge
		columns = 3
		title = "COMBO CHALLENGE"
		headers = [
			"RANK"
			"NAME"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = netcombomambo
		columns = 3
		title = "COMBO MAMBO"
		headers = [
			"RANK"
			"NAME"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = netgraffiti
		columns = 3
		title = "GRAFFITI"
		headers = [
			"RANK"
			"NAME"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = net_line
		columns = 3
		title = "SKATE THE LINE"
		headers = [
			"RANK"
			"NAME"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
	{
		leaderboard_id = net_nail
		columns = 3
		title = "NAIL THE TRICK"
		headers = [
			"RANK"
			"NAME"
			"SCORE"
		]
		column_pos = [
			0
			50
			500
		]
		column_ids = [
			2
		]
	}
]
master_leaderboard_types = [
	{
		leaderboard_type = high_score_run
		columns = 5
		headers = [
			"RANK"
			"GAMERTAG"
			"V."
			"LEVEL"
			"SCORE"
		]
		column_pos = [
			0
			50
			260
			340
			495
		]
		column_ids = [
			0
			1
			2
			3
			4
		]
		hasVersion = 2
		hasLevel = 3
	}
	{
		leaderboard_type = turf
		columns = 5
		headers = [
			"RANK"
			"GAMERTAG"
			"V."
			"LEVEL"
			"SCORE"
		]
		column_pos = [
			0
			50
			260
			340
			495
		]
		column_ids = [
			0
			1
			2
			3
			4
		]
		hasVersion = 2
		hasLevel = 3
	}
	{
		leaderboard_type = hawkman
		columns = 5
		headers = [
			"RANK"
			"GAMERTAG"
			"V."
			"LEVEL"
			"TIME"
		]
		column_pos = [
			0
			50
			260
			340
			495
		]
		column_ids = [
			0
			1
			2
			3
			4
		]
		hasVersion = 2
		hasLevel = 3
		hasTime = 4
	}
	{
		leaderboard_type = chalk
		columns = 5
		headers = [
			"RANK"
			"GAMERTAG"
			"V."
			"LEVEL"
			"SCORE"
		]
		column_pos = [
			0
			50
			260
			340
			495
		]
		column_ids = [
			0
			1
			2
			3
			4
		]
		hasVersion = 2
		hasLevel = 3
	}
]
ps3_master_leaderboard_types = [
	{
		leaderboard_type = high_score_run
		columns = 5
		headers = [
			"RANK"
			"NAME"
			"V."
			"LEVEL"
			"SCORE"
		]
		column_pos = [
			0
			50
			260
			340
			495
		]
		column_ids = [
			0
			1
			2
			3
			4
		]
		hasVersion = 2
		hasLevel = 3
	}
	{
		leaderboard_type = turf
		columns = 5
		headers = [
			"RANK"
			"NAME"
			"V."
			"LEVEL"
			"SCORE"
		]
		column_pos = [
			0
			50
			260
			340
			495
		]
		column_ids = [
			0
			1
			2
			3
			4
		]
		hasVersion = 2
		hasLevel = 3
	}
	{
		leaderboard_type = hawkman
		columns = 5
		headers = [
			"RANK"
			"NAME"
			"V."
			"LEVEL"
			"TIME"
		]
		column_pos = [
			0
			50
			260
			340
			495
		]
		column_ids = [
			0
			1
			2
			3
			4
		]
		hasVersion = 2
		hasLevel = 3
		hasTime = 4
	}
	{
		leaderboard_type = chalk
		columns = 5
		headers = [
			"RANK"
			"NAME"
			"V."
			"LEVEL"
			"SCORE"
		]
		column_pos = [
			0
			50
			260
			340
			495
		]
		column_ids = [
			0
			1
			2
			3
			4
		]
		hasVersion = 2
		hasLevel = 3
	}
]
last_goal_leaderboard_id = null
last_goal_leaderboard_type = null
current_columns = 3
current_headers = [
	"default"
	"default"
	"default"
]
current_column_pos = [
	0
	0
	0
]
current_leaderboard_index = 0
current_leaderboard_type = me
current_leaderboard_scope = 0
current_leaderboard_scope_max = 4
current_leaderboard_goal_type = bail
current_leaderboard_goal_type_index = 0
current_leaderboard_goals_array = [
	ragdoll_bail
]
current_leaderboard_id = ragdoll_bail
current_leaderboard_title = "None"
current_leaderboard_columns = [
	1
	1
	1
]
leaderboard_sent_task = 0

script request_leaderboard 
	printf '--- request_leaderboard'
	printf 'the leaderboard id is %a' a = <leaderboard_id>
	if gotparam columns
		change current_leaderboard_columns = <columns>
	endif
	if gotparam leaderboard_type
		leaderboard_setup_indicies_singleplayer leaderboard_type = <leaderboard_type> leaderboard_id = <leaderboard_id>
		change current_leaderboard_scope = 0
	endif
	if gotparam listtype
		change current_leaderboard_type = <listtype>
	endif
	if gotparam leaderboard_id
		change current_leaderboard_id = (<leaderboard_id>)
	endif
	if (($current_leaderboard_type) = global)
		<offset> = 1
	endif
	wait 2 gameframes
	if gotparam back_to_game
		<back_to_game> = back_to_game
	endif
	show_leaderboard leaderboard_id = <leaderboard_id> leaderbaord_type = <leaderboard_type> <back_to_game>
	current_menu_anchor :settags <...>
	leaderboard_display_helper_text leaderboard_id = <leaderboard_id>
	printf 'Requesting leaderboard: %a ' a = <leaderboard_id> b = <listtype> c = <offset>
	if ($leaderboard_sent_task = 0)
		change leaderboard_sent_task = 1
		netsessionfunc {
			obj = stats
			func = get_stats
			params = {
				leaderboard_id = <leaderboard_id>
				callback = draw_leaderboard_page_wrapper
				listtype = <listtype>
				offset = <offset>
				columns = ($current_leaderboard_columns)
				num_rows = 10
			}
		}
	endif
endscript

script leaderboard_setup_indicies_singleplayer 
	requireparams [leaderboard_id leaderboard_type] all
	gman_getgoalsbytype type = <leaderboard_type>
	change current_leaderboard_goals_array = <goals_by_type>
	change current_leaderboard_goal_type = <leaderboard_type>
	counter = 0
	begin
	if (getnextarrayelement <goals_by_type>)
		if gotparam element
			printf 'the goal is %a' a = <element>
			if checksumequals a = <leaderboard_id> b = <element>
				change current_leaderboard_index = <counter>
				return
			endif
			counter = (<counter> + 1)
		else
			break
		endif
	else
		break
	endif
	repeat
endscript

script show_leaderboard 
	printf '--- show_leaderboard'
	current_color_scheme = $ss_color_scheme
	main_title = "SINGLE PLAYER LEADERBOARDS"
	if ($current_leaderboard_scope = 1)
		main_title = "MULTIPLAYER LEADERBOARDS"
	endif
	if screenelementexists id = leaderboard_page_anchor
		destroyscreenelement id = leaderboard_vmenu preserve_parent
	else
		make_cas_menu {
			title = <main_title>
			menu_id = leaderboard_page_anchor
			vmenu_id = leaderboard_vmenu
			pad_back_script = destroy_leaderboard
			pos = (145.0, 100.0)
			title_pos = (70.0, 65.0)
			title_bg_pos = (55.0, 9.0)
			highlight_dims = (550.0, 32.0)
			bar_dims = (550.0, 32.0)
			color_scheme = <current_color_scheme>
			pausemenu
			width = 1280
			selection_height = 26
			highlight_add = (300.0, 0.0)
		}
		doscreenelementmorph {
			id = leaderboard_page_anchor
			pos = {(0.0, -30.0) relative}
		}
		doscreenelementmorph {
			id = leaderboard_vmenu
			pos = {(0.0, -10.0) relative}
		}
		if gotparam back_to_game
			createscreenelement {
				parent = leaderboard_page_anchor
				type = containerelement
				event_handlers = [
					{pad_square soundevent params = {event = Goal_UI_Positive_Text}}
					{pad_square destroy_leaderboard params = {id = <container_id> back_to_game retry_last_goal}}
				]
			}
			launchevent type = focus target = <id>
		endif
	endif
	leaderboard_disable_paging
	leaderboard_add_goal_name_sub_head color_scheme = <current_color_scheme>
	current_menu_anchor :settags current_color_scheme = <current_color_scheme> main_title = <main_title>
	if NOT gotparam leaderboard_id
		scriptassert 'No leaderboard_id provided, using default goal.'
	endif
	get_header_info leaderboard_id = <leaderboard_id>
	printf '--- got header_info'
	if NOT gotparam columns
		scriptassert 'Invalid goal checksum specified, or you did not define the goal columns.'
	endif
	if NOT gotparam title
		scriptassert 'Invalid goal checksum specified, or you did not define the goal title.'
	endif
	if NOT gotparam headers
		scriptassert 'Invalid goal checksum specified, or you did not define the goal headers.'
	endif
	if NOT gotparam column_pos
		scriptassert 'Invalid goal checksum specified, or you did not define the column_pos.'
	endif
	if gotparam hasVersion
		current_menu_anchor :settags hasVersion = <hasVersion>
	endif
	if gotparam hasLevel
		current_menu_anchor :settags hasLevel = <hasLevel>
	endif
	if gotparam hasTime
		current_menu_anchor :settags hasTime = <hasTime>
	else
		current_menu_anchor :settags hasTime = -1
	endif
	leaderboard_update_board_title title = <title>
	if screenelementexists id = current_menu_anchor
		runscriptonscreenelement id = current_menu_anchor leaderboard_create_loading
	endif
	cas_menu_finish
	leaderboard_display_helper_text leaderboard_id = <leaderboard_id>
	change current_columns = <columns>
	change current_headers = <headers>
	change current_column_pos = <column_pos>
	change current_leaderboard_title = <title>
endscript

script leaderboard_display_helper_text 
	gamer_card_line = {text = ""}
	if isxenon
		if is_video_edit_leaderboard leaderboard_id = <leaderboard_id>
			gamer_card_line = {text = "\\m0 GAMER CARD/DOWNLOAD EDIT"}
		else
			gamer_card_line = {text = "\\m0 GAMER CARD"}
		endif
	endif
	create_helper_text {
		helper_text_elements = [
			{text = "\\bg/\\bh PAGE"}
			{text = "\\m8 FILTER"}
			{<gamer_card_line>}
			{text = "\\m1 BACK"}
		]
	}
	current_menu_anchor :getsingletag helper_text_to_game
	if gotparam helper_text_to_game
		printf 'to game helper text'
		create_helper_text {
			helper_text_elements = [
				{text = "\\bg/\\bh PAGE"}
				{text = "\\m8 FILTER"}
				{<gamer_card_line>}
				{text = "\\m5 RETRY GOAL"}
				{text = "\\m1 BACK TO GAME"}
			]
		}
	endif
endscript

script leaderboard_update_board_title 
	printf \{'--- leaderboard_update_board_title'}
	setscreenelementprops {
		id = leaderboard_sub_head_title
		text = <title>
	}
endscript

script leaderboard_disable_paging 
	setscreenelementprops \{id = current_menu
		event_handlers = [
		]
		replace_handlers}
endscript

script leaderboard_enable_paging 
	printf '--- leaderboard_enable_paging'
	wait 1.1 seconds
	setscreenelementprops {
		id = current_menu
		event_handlers = [
			{pad_l2 get_leaderboard_page params = {offset = <left_offset> leaderboard_id = <leaderboard_id>}}
			{pad_r2 get_leaderboard_page params = {offset = <right_offset> leaderboard_id = <leaderboard_id>}}
			{pad_back generic_menu_pad_back_sound}
			{pad_back destroy_leaderboard}
			{pad_l1 get_new_leaderboard params = {left}}
			{pad_r1 get_new_leaderboard}
			{pad_option2 soundevent params = {event = UI_Toggle_Genre_SFX}}
			{pad_option2 change_leaderboard_type}
		]
		replace_handlers
	}
	setscreenelementprops {
		id = current_menu
		event_handlers = [
			{pad_up generic_menu_up_or_down_sound params = {up}}
			{pad_down generic_menu_up_or_down_sound params = {down}}
		]
	}
endscript

script leaderboard_add_goal_name_sub_head color_scheme = $ss_color_scheme
	if screenelementexists id = leaderboard_sub_head_container
		destroyscreenelement id = leaderboard_sub_head_container
	endif
	createscreenelement {
		id = leaderboard_sub_head_container
		type = containerelement
		parent = current_menu_anchor
		pos = (640.0, 100.0)
		just = [center center]
		scale = 2
	}
	createscreenelement {
		id = leaderboard_sub_head_title
		type = textelement
		parent = leaderboard_sub_head_container
		font = text_a1
		text = ""
		scale = 0.45000002
		just = [center center]
		rgba = (<color_scheme>.text_color)
	}
	createscreenelement {
		local_id = bg_right
		type = spriteelement
		parent = leaderboard_sub_head_container
		texture = menu_highlight
		dims = (400.0, 26.0)
		just = [center center]
		rgba = (<color_scheme>.title_bg)
		z_priority = 0
	}
	createscreenelement {
		local_id = left_arrow
		type = textelement
		parent = leaderboard_sub_head_container
		texture = arrow_R
		font = text_a1
		scale = 0.4
		text = "\\be"
		pos = (-140.0, 0.0)
		just = [right center]
	}
	createscreenelement {
		type = textelement
		parent = leaderboard_sub_head_container
		font = text_a1
		scale = 0.25
		text = "PREV"
		pos = (-110.0, 0.0)
		just = [right center]
		rgba = (<color_scheme>.cas_heading_text_color)
	}
	createscreenelement {
		local_id = right_arrow
		type = textelement
		parent = leaderboard_sub_head_container
		font = text_a1
		scale = 0.4
		text = "\\bf"
		pos = (140.0, 0.0)
		just = [left center]
	}
	createscreenelement {
		type = textelement
		parent = leaderboard_sub_head_container
		font = text_a1
		scale = 0.25
		text = "NEXT"
		pos = (110.0, 0.0)
		just = [left center]
		rgba = (<color_scheme>.cas_heading_text_color)
	}
endscript

script get_header_info 
	printf '--- get_header_info'
	if ($current_leaderboard_scope = 0)
		if isxenon
			getarraysize $master_leaderboard_types
		else
			getarraysize $ps3_master_leaderboard_types
		endif
		<i> = 0
		if isxenon
			begin
			if (($master_leaderboard_types [<i>].leaderboard_type) = ($current_leaderboard_goal_type))
				<columns> = ($master_leaderboard_types [<i>].columns)
				<headers> = ($master_leaderboard_types [<i>].headers)
				<column_pos> = ($master_leaderboard_types [<i>].column_pos)
				<hasVersion> = ($master_leaderboard_types [<i>].hasVersion)
				<hasLevel> = ($master_leaderboard_types [<i>].hasLevel)
				<hasTime> = ($master_leaderboard_types [<i>].hasTime)
				break
			endif
			<i> = (<i> + 1)
			repeat <array_size>
			if NOT gotparam columns
				scriptassert 'Goal type %s not found in $master_leaderboard_types' s = ($current_leaderboard_goal_type)
			endif
		else
			begin
			if (($ps3_master_leaderboard_types [<i>].leaderboard_type) = ($current_leaderboard_goal_type))
				<columns> = ($ps3_master_leaderboard_types [<i>].columns)
				<headers> = ($ps3_master_leaderboard_types [<i>].headers)
				<column_pos> = ($ps3_master_leaderboard_types [<i>].column_pos)
				<hasVersion> = ($ps3_master_leaderboard_types [<i>].hasVersion)
				<hasLevel> = ($ps3_master_leaderboard_types [<i>].hasLevel)
				<hasTime> = ($ps3_master_leaderboard_types [<i>].hasTime)
				break
			endif
			<i> = (<i> + 1)
			repeat <array_size>
			if NOT gotparam columns
				scriptassert 'Goal type %s not found in $ps3_master_leaderboard_types' s = ($current_leaderboard_goal_type)
			endif
		endif
		if goal_get_title goal = <leaderboard_id>
			title = <view_goals_title>
		else
			title = "???"
		endif
	else
		get_leaderboard_array_by_scope scope = $current_leaderboard_scope
		getarraysize <leaderboard_array>
		<i> = 0
		begin
		leaderboard_iter_id = ((<leaderboard_array> [<i>]).leaderboard_id)
		if (<leaderboard_iter_id> = <leaderboard_id>)
			<columns> = ((<leaderboard_array> [<i>]).columns)
			<title> = ((<leaderboard_array> [<i>]).title)
			<headers> = ((<leaderboard_array> [<i>]).headers)
			<hasVersion> = ((<leaderboard_array> [<i>]).hasVersion)
			<column_pos> = ((<leaderboard_array> [<i>]).column_pos)
			<hasTime> = ((<leaderboard_array> [<i>]).hasTime)
			break
		endif
		<i> = (<i> + 1)
		repeat <array_size>
	endif
	return columns = <columns> headers = <headers> column_pos = <column_pos> title = <title> hasVersion = <hasVersion> hasLevel = <hasLevel> hasTime = <hasTime>
endscript

script destroy_leaderboard 
	printf '--- destroy_leaderboard'
	if screenelementexists id = current_menu_anchor
		current_menu_anchor :gettags
		destroyscreenelement id = current_menu_anchor
	endif
	if gotparam back_to_game
		printf 'back to game'
		if gotparam retry_last_goal
			<retry_last_goal> = retry_last_goal
		endif
		leaderboard_exit_to_game <...> <retry_last_goal>
	else
		if gotparam back_to_pause
			printf 'back to pause menu'
			leaderboard_exit_to_pausemenu menu_recreate_script = <menu_recreate_script> update = <update> callback_script = <callback_script> callback_params = <callback_params>
		else
			if gotparam back_to_highscores
				printf 'back to high scores'
				leaderboard_exit_to_highscores
			else
				if ($current_leaderboard_scope = 0)
					create_singleplayer_goal_list type = ($current_leaderboard_goal_type)
				else
					leaderboard_scope_submenu scope_num = ($current_leaderboard_scope)
				endif
			endif
		endif
	endif
endscript

script leaderboard_exit_to_game 
	printf '--- leaderboard_exit_to_game'
	if gotparam menu_recreate_script
		<menu_recreate_script> <...> bypass_creation_animation = 1
	endif
	if gotparam leaderboard_callback_script
		printf '--- got callback_script'
		<leaderboard_callback_script> <callback_params>
	endif
	if (<do_pause> = 1)
		killspawnedscript name = goal_keep_skater_paused
		do_actual_unpause
		unpauseskaters
		skater :unpausephysics
		restore_start_key_binding
		show_all_hud_items
	endif
	if gotparam retry_last_goal
		goal_retry_last_goal
	endif
endscript

script leaderboard_exit_to_pausemenu 
	printf \{'--- leaderboard_exit_to_pausemenu'}
	<menu_recreate_script> <...>
	restore_start_key_binding
	if gotparam \{callback_script}
		printf \{'--- got callback_script'}
		<callback_script> <callback_params>
	endif
endscript

script leaderboard_exit_to_highscores 
	printf \{'--- leaderboard_exit_to_highscores'}
	high_scores_menu_create
endscript

script draw_leaderboard_page_wrapper 
	printf \{'--- draw_leaderboard_page_wrapper'}
	change \{leaderboard_sent_task = 0}
	if screenelementexists \{id = leaderboard_page_anchor}
		killspawnedscript \{name = draw_leaderboard_page}
		runscriptonscreenelement draw_leaderboard_page id = leaderboard_page_anchor params = {<...>}
	else
		return
	endif
endscript

script draw_leaderboard_page 
	printf '--- draw_leaderboard_page'
	if NOT screenelementexists id = current_menu_anchor
		return
	endif
	if screenelementexists id = current_menu
		destroyscreenelement id = current_menu preserve_parent
	endif
	leaderboard_kill_loading
	if NOT gotparam leaderboard_data
		scriptassert 'No leaderboard data provided. Cannot generate leaderboard.'
	endif
	if NOT gotparam offset
		scriptassert 'No leaderboard offset provided, stuff will be messed up.'
		<offset> = 1
	endif
	if gotparam listtype
		current_menu_anchor :getsingletag main_title
		switch <listtype>
			case friends
			<title> = (<main_title> + " (FRIENDS)")
			case me
			<title> = (<main_title> + " (ME)")
			case global
			default
			<title> = (<main_title> + " (GLOBAL)")
		endswitch
		if screenelementexists id = pause_title_text
			getlowercasestring <title>
			setscreenelementprops id = pause_title_text text = <lowercasestring>
		endif
	endif
	add_leaderboard_headings data = ($current_headers)
	getarraysize leaderboard_data
	current_menu_anchor :getsingletag hasLevel
	current_menu_anchor :getsingletag hasTime
	current_menu_anchor :getsingletag hasVersion
	if NOT (<array_size> = 0)
		<i> = 0
		begin
		add_leaderboard_row {
			data = (<leaderboard_data> [<i>].data)
			player_xuid = (<leaderboard_data> [<i>].player_xuid)
			hasTime = <hasTime>
			hasLevel = <hasLevel>
			hasVersion = <hasVersion>
			leaderboard_id = <leaderboard_id>
		}
		<i> = (<i> + 1)
		repeat <array_size>
	endif
	<left_offset> = (<offset> - 10)
	if (<left_offset> < 1)
		<left_offset> = 1
	endif
	if (<left_offset> = <offset>)
		<left_offset> = -1
	endif
	if (<array_size> < 10)
		<right_offset> = -1
	else
		<right_offset> = (<offset> + 10)
	endif
	spawnscript leaderboard_enable_paging params = {leaderboard_id = <leaderboard_id> left_offset = <left_offset> right_offset = <right_offset>}
	leaderboard_menu_wait_and_focus
endscript

script leaderboard_menu_wait_and_focus 
	printf \{'--- leaderboard_menu_wait_and_focus'}
	wait \{10
		gameframe}
	launchevent \{type = focus
		target = current_menu
		data = {
			grid_index = 0
		}}
	launchevent \{type = focus
		target = {
			current_menu
			child = 1
		}}
endscript

script add_leaderboard_headings 
	requireparams [data] all
	printf '-- add_leaderboard_headings'
	current_menu_anchor :getsingletag current_color_scheme
	if NOT current_menu_anchor :getsingletag hasVersion
		<hasVersion> = -1
	endif
	if NOT current_menu_anchor :getsingletag hasLevel
		<hasLevel> = -1
	endif
	if screenelementexists id = leaderboard_heading_label_container
		destroyscreenelement id = leaderboard_heading_label_container
	endif
	createscreenelement {
		type = containerelement
		pos = (60.0, 140.0)
		parent = current_menu_anchor
		id = leaderboard_heading_label_container
		internal_just = [left center]
	}
	createscreenelement {
		parent = leaderboard_heading_label_container
		type = spriteelement
		texture = white
		dims = (1440.0, 40.0)
		pos = (-40.0, 60.0)
		just = [left center]
		rgba = (<current_color_scheme>.title_bg)
		z_priority = 1
	}
	getarraysize <data>
	<i> = 0
	begin
	if (<i> = 0)
		add_cas_menu_item {
			text = (<data> [<i>])
			just = [left center]
			not_focusable = 1
			text_case = upper
			cas_heading
			scale = (0.27, 0.35000002)
			text_offset = (-96.0, -1.0)
		}
	else
		getscreenelementprops id = {<item_container_id> child = text}
		text_pos = <pos>
		if (<i> = ($current_columns - 1))
			<my_just> = [right center]
		else
			<my_just> = [left center]
		endif
		if NOT (<hasVersion> = <i>)
			<long_rank_text_offset> = (0.0, 0.0)
			if (<i> = 1)
				<long_rank_text_offset> = (49.0, 0.0)
			elseif (<hasLevel> = <i>)
				<long_rank_text_offset> = (20.0, 0.0)
			endif
			createscreenelement {
				type = textelement
				parent = <item_container_id>
				just = <my_just>
				font = text_a1
				scale = <scale>
				pos = (($current_column_pos [<i>]) * (1.0, 0.0) + <text_pos> + <long_rank_text_offset>)
				text = (<data> [<i>])
				z_priority = 5
				rgba = ($goal_ui_scheme.main)
			}
		endif
	endif
	<i> = (<i> + 1)
	repeat <array_size>
endscript

script add_leaderboard_row rgba = [115 115 109 200]
	requireparams [data] all
	if NOT gotparam hasLevel
		hasLevel = -1
	endif
	if NOT gotparam hasTime
		hasTime = -1
	endif
	if NOT gotparam hasVersion
		hasVersion = -1
	endif
	getarraysize <data>
	if (<array_size> > $current_columns)
		printf 'WARNING: Leaderboard has %a columns, only %b specified to be displayed.' a = <array_size> b = $current_columns
		<array_size> = $current_columns
	endif
	printf '--- add_leaderboard_row'
	current_menu_anchor :getsingletag current_color_scheme
	rgba = (<current_color_scheme>.text_color)
	if isxenon
		<leaderboard_row_pad_choose> = {
			pad_choose_script = leaderboard_select_entry
			pad_choose_params = {player_xuid = <player_xuid> leaderboard_id = <leaderboard_id>}
		}
	else
		<leaderboard_row_pad_choose> = {
			pad_choose_sound = nullscript
		}
	endif
	<highlight_me> = 0
	netsessionfunc obj = match func = get_gamertag
	<gamertag> = <name>
	if gotparam gamertag
		if ((<data> [1]) = <gamertag>)
			<highlight_me> = 1
		endif
	endif
	<i> = 0
	begin
	if (<i> = 0)
		add_cas_menu_item {
			text = (<data> [<i>])
			just = [left center]
			<leaderboard_row_pad_choose>
			highlight_add = (370.0, 0.0)
		}
		if (<highlight_me> = 1)
			if screenelementexists id = <item_container_id>
				runscriptonscreenelement id = <item_container_id> ui_leaderboard_row_highlight_me
			endif
		endif
	else
		leaderboard_row_get_col_id index = <i>
		getscreenelementprops id = {<item_container_id> child = text}
		text_scale = 0.5
		text_pos = <pos>
		text_z = <z_priority>
		if (<hasLevel> = <i>)
			star_type = (<data> [<i>])
			printf 'star_type %a' a = <star_type>
			switch <star_type>
				case "1"
				star_texture = icon_small_am
				case "2"
				star_texture = icon_small_pro
				case "3"
				star_texture = icon_small_sick
				default
				star_texture = icon_small_am
				printf 'WARNING: Bad star_type value!'
			endswitch
			createscreenelement {
				type = spriteelement
				local_id = <col_id>
				texture = <star_texture>
				dims = (30.0, 30.0)
				parent = <item_container_id>
				just = [center center]
				pos = ((($current_column_pos [<i>]) * (1.0, 0.0) + <text_pos>) + (20.0, 0.0))
				z_priority = <text_z>
			}
		else
			theText = (<data> [<i>])
			if (<hasTime> = <i>)
				theData = (<data> [<i>])
				widestringtointeger theData
				mod a = <theData> b = 60000
				seconds = (<mod> / 1000.0)
				minutes = (<theData> / 60000.0)
				mathfloor <minutes>
				minutes = <floor>
				formattext textname = theText "%a:%b" a = <minutes> b = <seconds>
			elseif (<i> > 1)
				theData = (<data> [<i>])
				widestringtointeger theData
				formattext textname = theText "%a" a = <theData> usecommas
			endif
			if (<i> = ($current_columns - 1))
				<my_just> = [right center]
			else
				<my_just> = [left center]
			endif
			if NOT (<hasVersion> = <i>)
				createscreenelement {
					type = textelement
					local_id = <col_id>
					parent = <item_container_id>
					just = <my_just>
					font = text_a1
					scale = <text_scale>
					pos = ((($current_column_pos [<i>]) * (1.0, 0.0)) + (0.0, 0.0) + <text_pos>)
					text = <theText>
					z_priority = <text_z>
					rgba = <rgba>
				}
			endif
		endif
	endif
	<i> = (<i> + 1)
	repeat <array_size>
	setscreenelementprops {
		id = <item_container_id>
		event_handlers = [
			{focus leaderboard_row_additional_focus params = {num_items = (<array_size> -1) id = <item_container_id>}}
			{unfocus leaderboard_row_additional_unfocus params = {num_items = (<array_size> -1) id = <item_container_id>}}
		]
	}
endscript

script ui_leaderboard_row_highlight_me 
	obj_getid
	if screenelementexists id = ui_leaderboard_row_highlight_bg
		destroyscreenelement id = ui_leaderboard_row_highlight_bg
	endif
	createscreenelement {
		id = ui_leaderboard_row_highlight_bg
		type = spriteelement
		parent = <objid>
		just = [left center]
		internal_just = [left center]
		pos = (-90.0, -2.0)
		dims = (507.0, 24.0)
		texture = white
		rgba = ($goal_ui_scheme.main)
		alpha = 0.4
	}
	begin
	<id> :domorph alpha = 0.4 time = 0.3
	wait 0.3 seconds ignoreslomo
	<id> :domorph alpha = 0.2 time = 0.6
	repeat
endscript

script leaderboard_row_get_col_id 
	if NOT gotparam \{index}
		printf \{'leaderboard_row_get_col_id did not get index!'}
		return
	endif
	formattext checksumname = col_id 'col_%a' a = <index>
	return col_id = <col_id>
endscript

script leaderboard_row_additional_focus 
	current_menu_anchor :getsingletag current_color_scheme
	current_menu_anchor :getsingletag hasLevel
	if NOT gotparam hasLevel
		hasLevel = -1
	endif
	i = 1
	begin
	if NOT (<hasLevel> = <i>)
		leaderboard_row_get_col_id index = <i>
		if screenelementexists id = {<id> child = <col_id>}
			setscreenelementprops {
				id = {<id> child = <col_id>}
				rgba = ($goal_ui_scheme.main)
			}
		endif
	endif
	<i> = (<i> + 1)
	repeat <num_items>
endscript

script leaderboard_row_additional_unfocus 
	current_menu_anchor :getsingletag current_color_scheme
	current_menu_anchor :getsingletag hasLevel
	if NOT gotparam hasLevel
		hasLevel = -1
	endif
	i = 1
	begin
	if NOT (<hasLevel> = <i>)
		leaderboard_row_get_col_id index = <i>
		if screenelementexists id = {<id> child = <col_id>}
			setscreenelementprops {
				id = {<id> child = <col_id>}
				rgba = (<current_color_scheme>.text_color)
			}
		endif
	endif
	<i> = (<i> + 1)
	repeat <num_items>
endscript

script get_leaderboard_page offset = -1 columns = [1 1 1]
	if (<offset> = -1)
		printf 'Cannot go there!'
		return
	endif
	leaderboard_disable_paging
	if screenelementexists id = current_menu
		destroyscreenelement id = current_menu preserve_parent
	endif
	setscreenelementlock id = current_menu_anchor off
	if screenelementexists id = current_menu_anchor
		runscriptonscreenelement id = current_menu_anchor leaderboard_create_loading
	endif
	wait 1 gameframe
	if ($leaderboard_sent_task = 0)
		change leaderboard_sent_task = 1
		printf 'REQUESTING NEXT PAGE!!'
		netsessionfunc {
			obj = stats
			func = get_stats
			columns = <columns>
			params = {
				leaderboard_id = <leaderboard_id>
				callback = draw_leaderboard_page_wrapper
				offset = <offset>
				num_rows = 10
				columns = $current_leaderboard_columns
			}
		}
	endif
endscript

script leaderboard_pulse_loading 
	printf \{'--- leaderboard_pulse_loading'}
	<pulse_time> = 0.25
	begin
	doscreenelementmorph id = leaderboard_loading alpha = 0.25 time = <pulse_time>
	wait <pulse_time> seconds
	doscreenelementmorph id = leaderboard_loading alpha = 1 time = <pulse_time>
	wait <pulse_time> seconds
	repeat
endscript

script leaderboard_create_loading 
	printf '--- leaderboard_create_loading'
	leaderboard_kill_loading
	createscreenelement {
		type = containerelement
		parent = current_menu_anchor
		pos = (1000.0, 155.0)
		id = leaderboard_loading
		z_priority = 10000
	}
	createscreenelement {
		type = textelement
		parent = leaderboard_loading
		text = "Loading..."
		scale = 0.75
		rgba = [10 43 60 200]
		z_priority = 100002
		just = [center center]
		font_spacing = 3
		font = text_a1
		pos = (0.0, 0.0)
	}
	createscreenelement {
		type = spriteelement
		parent = leaderboard_loading
		texture = white
		scale = (40.0, 9.0)
		rgba = [60 77 86 110]
		z_priority = 100001
		just = [center center]
		pos = (0.0, -3.0)
	}
	runscriptonscreenelement leaderboard_pulse_loading id = leaderboard_loading
	leaderboard_timeout_timer
endscript

script leaderboard_timeout_timer 
	wait \{15
		seconds}
	generic_menu_pad_back_sound
	destroy_leaderboard
endscript

script leaderboard_kill_loading 
	if screenelementexists \{id = leaderboard_loading}
		destroyscreenelement \{id = leaderboard_loading}
	endif
	killspawnedscript \{name = leaderboard_timeout_timer}
endscript

script get_new_leaderboard 
	printf '--- get_new_leaderboard'
	leaderboard_disable_paging
	if gotparam left
		new_index = ($current_leaderboard_index - 1)
	else
		new_index = ($current_leaderboard_index + 1)
	endif
	if ($current_leaderboard_scope = 0)
		printf 'singleplayer'
		getarraysize $current_leaderboard_goals_array
		if (<new_index> < 0)
			<new_index> = (<array_size> - 1)
		endif
		if (<new_index> > (<array_size> - 1))
			<new_index> = 0
		endif
		change current_leaderboard_index = <new_index>
		leaderboard_id = ($current_leaderboard_goals_array [($current_leaderboard_index)])
	else
		printf 'non singleplayer'
		get_leaderboard_array_by_scope scope = $current_leaderboard_scope
		getarraysize <leaderboard_array>
		if (<new_index> < 0)
			<new_index> = (<array_size> - 1)
		endif
		if (<new_index> > (<array_size> - 1))
			<new_index> = 0
		endif
		if (<new_index> = ($current_leaderboard_index))
			printf 'What the shit?'
		endif
		change current_leaderboard_index = <new_index>
		change current_headers = (<leaderboard_array> [($current_leaderboard_index)].headers)
		leaderboard_id = (<leaderboard_array> [($current_leaderboard_index)].leaderboard_id)
		leaderboard_columns = (<leaderboard_array> [($current_leaderboard_index)].column_ids)
	endif
	request_leaderboard leaderboard_id = <leaderboard_id> columns = <leaderboard_columns>
endscript

script change_leaderboard_type 
	switch $current_leaderboard_type
		case me
		if isxenon
			change \{current_leaderboard_type = friends}
		else
			change \{current_leaderboard_type = global}
		endif
		case friends
		change \{current_leaderboard_type = global}
		case global
		change \{current_leaderboard_type = me}
	endswitch
	request_leaderboard leaderboard_id = ($current_leaderboard_id) listtype = ($current_leaderboard_type)
endscript

script get_new_goal_type 
	printf '--- get_new_goal_type'
	goal_index = ($current_leaderboard_goal_type_index)
	getarraysize $goal_types
	goal_type_num = <array_size>
	begin
	goal_type = ($goal_types [<goal_index>])
	getarraysize ($goal_type_info.<goal_type>.leaderboard)
	if gotparam left
		goal_index = (<goal_index> -1)
		if (<goal_index> < 0)
			goal_index = (<goal_type_num> -1)
		endif
	else
		goal_index = (<goal_index> + 1)
		if (<goal_index> > (<goal_type_num> - 1))
			goal_index = 0
		endif
	endif
	if NOT (<array_size> = 0)
		break
	endif
	repeat
	change current_leaderboard_goal_type = ($goal_types [<goal_index>])
	return goal_index = <goal_index>
endscript

script get_leaderboard_array_by_scope 
	printf '--- get_leaderboard_array_by_scope'
	if NOT gotparam scope
		scriptassert "NO SCOPE GIVEN!"
		return
	endif
	switch <scope>
		case 1
		if isxenon
			return leaderboard_array = ($master_leaderboard_multiplayer_list)
		else
			return leaderboard_array = ($ps3_master_leaderboard_multiplayer_list)
		endif
		case 2
		if isxenon
			return leaderboard_array = ($master_leaderboard_stat_list)
		else
			return leaderboard_array = ($ps3_master_leaderboard_stat_list)
		endif
		case 3
		if isxenon
			return leaderboard_array = ($master_leaderboard_video_edit_list)
		else
			return leaderboard_array = ($ps3_master_leaderboard_video_edit_list)
		endif
	endswitch
	return leaderboard_array = <leaderboard_array>
endscript

script is_video_edit_leaderboard 
	getarraysize ($master_leaderboard_video_edit_list)
	i = 0
	begin
	edit_entry = (($master_leaderboard_video_edit_list) [<i>])
	if ((<edit_entry>.leaderboard_id) = <leaderboard_id>)
		return true video_edit_leaderboard = <edit_entry>
	endif
	i = (<i> + 1)
	repeat <array_size>
	return \{false}
endscript

script leaderboard_select_entry 
	printf '--- leaderboard_select_entry'
	if isxenon
		if is_video_edit_leaderboard leaderboard_id = <leaderboard_id>
			create_dialog_box {
				title = (<video_edit_leaderboard>.title)
				text = "Leaderboard entry selected.\\nYou may either view the gamer card, or download the edit.\\nDownloads video editing data only. No actual footage, music or other materials will be transferred or downloaded."
				pad_back_script = leaderboard_dialog_back
				pad_back_params = {<...>}
				buttons = [
					{text = "View Gamer Card" pad_choose_script = leaderboard_dialog_show_gamer_card pad_choose_params = {<...>}}
					{text = "Download Edit" pad_choose_script = leaderboard_dialog_download pad_choose_params = {<...>}}
				]
				text_dims = (650.0, 0.0)
				vmenu_width = 600
				preserve_case
			}
		else
			show_gamer_card player_xuid = <player_xuid>
		endif
	endif
endscript

script leaderboard_dialog_show_gamer_card 
	dialog_box_exit
	show_gamer_card <...>
endscript

script leaderboard_dialog_back 
	destroy_dialog_box
	if NOT infrontend
		restore_start_key_binding
	endif
	leaderboard_display_helper_text leaderboard_id = <leaderboard_id>
endscript

script leaderboard_dialog_download 
	printf '--- leaderboard_dialog_download'
	if infrontend
		do_ok_dialog_box {
			title = "Video Download"
			text = "Video can not be played back from within the main menu. You must load into a singleplayer game in order to play back video."
			text_dims = (650.0, 0.0)
			vmenu_width = 600
			preserve_case
		}
		leaderboard_dialog_back {<...>}
		return
	endif
	destroy_dialog_box
	generic_ui_destroy
	kill_start_key_binding
	if has_active_video_editor_cheats
		restore_start_key_binding
		create_dialog_box {title = "Video Download"
			text = "You have some cheats enabled which prevent use of video playback."
			buttons = [{text = "ok" pad_choose_script = leaderboard_dialog_download_early_cancel}
			]
		}
		return
	else
		if NOT game_progress_check_valid_save fix_start_key
			leaderboard_dialog_download_early_cancel
			return
		endif
	endif
	leaderboard_create_download_ui
	ve_free_up_scratch_heap
	ve_set_render_playback toggle = 1
	change leaderboard_download_cancelled = 0
	change leaderboard_download_done = 0
	EditBufferFunc func = download_to_buffer player_xuid = <player_xuid> leaderboard_id = <leaderboard_id> callback = leaderboard_download_callback
	begin
	wait 1 gameframe
	netsessionfunc obj = stats func = get_stats_state
	if (<state> = none)
		printf 'leaderboard_dialog_download - Done'
		break
	endif
	formattext textname = text "%d\\%" d = <progress>
	setscreenelementprops id = ui_ve_downloading_progress text = <text>
	repeat
	begin
	if ($leaderboard_download_done = 1)
		break
	endif
	wait 1 gameframe
	repeat 10
	if ($leaderboard_download_done = 0)
		leaderboard_download_callback {status = 1}
	endif
endscript

script leaderboard_dialog_download_early_cancel 
	restore_start_key_binding
	ui_create_leaderboard
endscript
leaderboard_download_cancelled = 0
leaderboard_download_done = 0

script leaderboard_download_callback 
	printf 'leaderboard_download_callback'
	change leaderboard_download_done = 1
	if screenelementexists id = ve_downloading_ui
		destroyscreenelement id = ve_downloading_ui
	endif
	if ($leaderboard_download_cancelled = 0)
		if (<status> = 0)
			if EditBufferFunc func = process_downloaded_buffer
				create_dialog_box {
					title = "Successful!"
					text = "Download Successful"
					pad_back_script = leaderboard_download_cancel
					buttons = [
						{text = "Play" pad_choose_script = ve_play_video_render pad_choose_params = {allow_saving = 1}}
						{text = "Cancel" pad_choose_script = leaderboard_download_cancel}
					]
				}
				return
			endif
		endif
	endif
	text = "Your transfer has been interrupted. Check your network connection and try transferring this video again."
	if ($leaderboard_download_cancelled = 1)
		text = "Download Cancelled"
	else
		printstruct <...>
		switch (<status>)
			case 0
			case 1
			text = "Video Data on leaderboard is damaged."
			case 3
			text = "Download Cancelled"
			case 2
			case 4
			scriptassert 'This shouldnt happen!'
			case 5
			text = "You don't have permission to transfer this data."
			case 7
			text = "Your transfer has been interrupted. Check your network connection and try transferring this video again."
			case 6
			case 8
			text = "Error transferring. There is no video posted for the gamertag you have selected."
		endswitch
	endif
	create_dialog_box {
		title = "Video Download"
		text = <text>
		pad_back_script = leaderboard_download_cancel
		preserve_case
		buttons = [
			{text = "OK" pad_choose_script = leaderboard_download_cancel}
		]
	}
endscript

script leaderboard_download_cancel 
	destroy_dialog_box
	EditBufferFunc \{func = clear}
	ve_set_render_playback \{toggle = 0}
	ve_set_memory_state \{state = unused}
	restore_start_key_binding
	ui_create_leaderboard
endscript

script leaderboard_create_download_ui 
	event_handlers = [
		{pad_back ve_downloading_stop params = {}}
		{pad_start ve_downloading_stop params = {}}
	]
	createscreenelement {
		parent = root_window
		id = ve_downloading_ui
		type = containerelement
		event_handlers = <event_handlers>
		z_priority = 1000
	}
	createscreenelement {
		type = spriteelement
		texture = white2
		rgba = [0 0 0 255]
		alpha = 1
		just = [center center]
		dims = (1280.0, 720.0)
		pos = (640.0, 360.0)
		parent = ve_downloading_ui
		z_priority = 999
	}
	createscreenelement {
		parent = ve_downloading_ui
		type = textelement
		font = text_a1
		pos = (165.0, 94.0)
		scale = 1.0
		text = "DOWNLOADING"
		just = [left center]
		z_priority = 1001
	}
	createscreenelement {
		parent = ve_downloading_ui
		type = textelement
		id = ui_ve_downloading_progress
		font = text_a1
		pos = (640.0, 360.0)
		scale = 2.0
		text = ""
		just = [center center]
		z_priority = 1001
	}
	createscreenelement {
		parent = ve_downloading_ui
		id = ve_rendering_ui_dot
		type = spriteelement
		texture = circle
		just = [left center]
		pos = (135.0, 90.0)
		scale = 1.5
		z_priority = 1001
	}
	createscreenelement {
		parent = ve_downloading_ui
		type = textelement
		font = text_a1
		pos = (270.0, 650.0)
		scale = (0.9, 0.7)
		text = "\\m1 Stop transferring"
		rgba = [240 240 240 180]
		not_focusable
	}
	runscriptonscreenelement ve_uploading_ui_blink id = ve_rendering_ui_dot
	runscriptonscreenelement ve_uploading_text_buzz id = ui_ve_downloading_progress
	launchevent type = focus target = ve_downloading_ui
endscript

script ve_downloading_stop 
	printf \{'ve_downloading_stop'}
	change \{leaderboard_download_cancelled = 1}
	netsessionfunc \{obj = stats
		func = cancel_upload_download}
endscript
