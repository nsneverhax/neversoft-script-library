GrindMods = [
]
Extra_FS_Grinds = [
	{
		trigger = {
			InOrder
			a = triangle
			b = triangle
			300
		}
		scr = Trick_5050_FS
		params = {
			name = "FS 50-50"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			a = square
			b = square
			300
		}
		scr = Trick_NoseGrind_FS
		params = {
			name = "FS Nosegrind"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			a = circle
			b = circle
			300
		}
		scr = Trick_5_0_FS
		params = {
			name = "FS 5-0"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			triangle
			square
			300
		}
		scr = Trick_Noseslide_FS_ok
		params = {
			name = "FS Noseslide"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			square
			triangle
			300
		}
		scr = Trick_Tailslide_FS_ok
		params = {
			name = "FS Tailslide"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			square
			circle
			300
		}
		scr = Trick_Crooked_FS
		params = {
			name = "FS Crooked"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			circle
			square
			300
		}
		scr = Trick_Overcrook_FS
		params = {
			name = "FS Overcrook"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			triangle
			circle
			300
		}
		scr = Trick_Smith_FS
		params = {
			name = "FS Smith"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			circle
			triangle
			300
		}
		scr = Trick_Feeble_FS
		params = {
			name = "FS Feeble"
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			up
			b = up
			c = triangle
			500
		}
		scr = Trick_NoseBluntSlide_FS
		params = {
			name = "FS Nosebluntslide"
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			down
			b = down
			c = triangle
			500
		}
		scr = Trick_Bluntslide_FS
		params = {
			name = "FS Bluntslide"
			isextra = isextra
		}
	}
]
Extra_BS_Grinds = [
	{
		trigger = {
			InOrder
			a = triangle
			b = triangle
			300
		}
		scr = Trick_5050_BS
		params = {
			name = "BS 50-50"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			a = square
			b = square
			300
		}
		scr = Trick_NoseGrind_BS
		params = {
			name = "BS Nosegrind"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			a = circle
			b = circle
			300
		}
		scr = Trick_5_0_BS
		params = {
			name = "BS 5-0"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			triangle
			square
			300
		}
		scr = Trick_Noseslide_BS_ok
		params = {
			name = "BS Noseslide"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			square
			triangle
			300
		}
		scr = Trick_Tailslide_FS_ok
		params = {
			name = "BS Tailslide"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			square
			circle
			300
		}
		scr = Trick_Crooked_BS
		params = {
			name = "BS Crooked"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			circle
			square
			300
		}
		scr = Trick_Overcrook_BS
		params = {
			name = "BS Overcrook"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			triangle
			circle
			300
		}
		scr = Trick_Smith_BS
		params = {
			name = "BS Smith"
			isextra = isextra
		}
	}
	{
		trigger = {
			InOrder
			circle
			triangle
			300
		}
		scr = Trick_Feeble_BS
		params = {
			name = "BS Feeble"
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			up
			b = up
			c = triangle
			500
		}
		scr = Trick_NoseBluntSlide_BS
		params = {
			name = "BS Nosebluntslide"
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			down
			b = down
			c = triangle
			500
		}
		scr = Trick_Bluntslide_BS
		params = {
			name = "BS Bluntslide"
			isextra = isextra
		}
	}
]
Extra_Hurricane_BS_Grinds = [
	{
		trigger = {
			InOrder
			a = triangle
			b = triangle
			300
		}
		scr = Trick_5050_from_Hurricane
	}
	{
		trigger = {
			InOrder
			a = square
			b = square
			300
		}
		scr = Trick_5050_from_Hurricane
	}
	{
		trigger = {
			InOrder
			a = circle
			b = circle
			300
		}
		scr = Trick_5050_from_Hurricane
	}
	{
		trigger = {
			InOrder
			triangle
			square
			300
		}
		scr = Trick_5050_from_Hurricane
	}
	{
		trigger = {
			InOrder
			square
			triangle
			300
		}
		scr = Trick_5050_from_Hurricane
	}
	{
		trigger = {
			InOrder
			square
			circle
			300
		}
		scr = Trick_5050_from_Hurricane
	}
	{
		trigger = {
			InOrder
			circle
			square
			300
		}
		scr = Trick_5050_from_Hurricane
	}
	{
		trigger = {
			InOrder
			triangle
			circle
			300
		}
		scr = Trick_5050_from_Hurricane
	}
	{
		trigger = {
			InOrder
			circle
			triangle
			300
		}
		scr = Trick_5050_from_Hurricane
	}
	{
		trigger = {
			TripleInOrderSloppy
			up
			b = up
			c = triangle
			500
		}
		scr = Trick_5050_from_Hurricane
	}
	{
		trigger = {
			TripleInOrderSloppy
			down
			b = down
			c = triangle
			500
		}
		scr = Trick_5050_from_Hurricane
	}
]
Extra_Hurricane_FS_Grinds = [
	{
		trigger = {
			InOrder
			a = triangle
			b = triangle
			300
		}
		scr = Trick_5050_from_Hurricane
		params = {
			fs
		}
	}
	{
		trigger = {
			InOrder
			a = square
			b = square
			300
		}
		scr = Trick_5050_from_Hurricane
		params = {
			fs
		}
	}
	{
		trigger = {
			InOrder
			a = circle
			b = circle
			300
		}
		scr = Trick_5050_from_Hurricane
		params = {
			fs
		}
	}
	{
		trigger = {
			InOrder
			triangle
			square
			300
		}
		scr = Trick_5050_from_Hurricane
		params = {
			fs
		}
	}
	{
		trigger = {
			InOrder
			square
			triangle
			300
		}
		scr = Trick_5050_from_Hurricane
		params = {
			fs
		}
	}
	{
		trigger = {
			InOrder
			square
			circle
			300
		}
		scr = Trick_5050_from_Hurricane
		params = {
			fs
		}
	}
	{
		trigger = {
			InOrder
			circle
			square
			300
		}
		scr = Trick_5050_from_Hurricane
		params = {
			fs
		}
	}
	{
		trigger = {
			InOrder
			triangle
			circle
			300
		}
		scr = Trick_5050_from_Hurricane
		params = {
			fs
		}
	}
	{
		trigger = {
			InOrder
			circle
			triangle
			300
		}
		scr = Trick_5050_from_Hurricane
		params = {
			fs
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			up
			b = up
			c = triangle
			500
		}
		scr = Trick_5050_from_Hurricane
		params = {
			fs
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			down
			b = down
			c = triangle
			500
		}
		scr = Trick_5050_from_Hurricane
		params = {
			fs
		}
	}
]

script Trick_5050_from_Hurricane 
	flipafter
	if NOT gotparam \{fs}
		Trick_5050_BS \{isextra = isextra}
	else
		Trick_5050_FS \{isextra = isextra}
	endif
endscript
GrindRelease = [
	{
		trigger = {
			Press
			r2
			100
		}
		scr = SkateInOrBail
		params = {
			GrindRelease
			grindbail = Airborne
			moveright = -0.125
			movey = 0.125
		}
	}
]
SPECIALGRIND_SCORE = 1500
GRINDTAP_TIME = 1000
GRINDTAP_SCORE = 400
GRINDTAP_TWEAK = 25
GrindTaps_FS = [
	{
		trigger = {
			TripleInOrderSloppy
			upright
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_FiveOOverturn_FS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			downright
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_Salad_FS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			downleft
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_Hurricane_FS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			upleft
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_OneFootCrook_FS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			up
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_HangTenNoseGrind_FS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			right
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_CrailSlide_FS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			left
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_NoseslideTailgrab_BS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			down
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_FiveOHandDrag_FS
		params = {
			isextra = isextra
		}
	}
]
GrindTaps_BS = [
	{
		trigger = {
			TripleInOrderSloppy
			upright
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_FiveOOverturn_BS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			downright
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_Salad_BS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			downleft
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_Hurricane_BS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			upleft
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_OneFootCrook_BS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			up
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_HangTenNoseGrind_BS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			right
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_CrailSlide_BS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			left
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_NoseslideTailgrab_FS
		params = {
			isextra = isextra
		}
	}
	{
		trigger = {
			TripleInOrderSloppy
			down
			b = triangle
			c = triangle
			GRINDTAP_TIME
		}
		scr = Trick_FiveOHandDrag_FS
		params = {
			isextra = isextra
		}
	}
]

script GetBoardGrindBone \{objid = skater}
	<objid> :getsparkspos
	switch <sparkspos>
		case front
		if <objid> :boardisrotated
			<bone> = bone_board_truck_back
		else
			<bone> = BONE_BOARD_TRUCK_NOSE
		endif
		case rear
		if <objid> :boardisrotated
			<bone> = BONE_BOARD_TRUCK_NOSE
		else
			<bone> = bone_board_truck_back
		endif
		default
		<bone> = bone_board_deck
	endswitch
	return bone = <bone>
endscript

script SkateInOrBail 
	NoRailTricks
	stopbalancetrick
	killextratricks
	setextratricks \{NoTricks}
	OnGroundExceptions \{NoEndRun}
	setqueuetricks \{NoTricks}
	clearmanualtrick
	setlastlandingvert
	spawnterrainsound \{action = stopsounds}
	killspawnedscript \{name = Stall_Sfx_Logic}
	if issoundplaying \{$truck_sfx_name}
		stopsound \{$truck_sfx_name}
	endif
	rollinorbail <...>
endscript

script OnGroundExceptions_NoOllieAfterEndofRun 
	OnGroundExceptions \{NoEndRun}
	if GoalManager_GoalShouldExpire
		cleareventhandler \{Ollied}
		cleareventhandler \{groundgone}
		cleareventhandler \{Wallpush}
		onexceptionrun
	endif
endscript

script SkateIn_Right \{rot_angle = 90}
	SkateIn_Left {rot_angle = (<rot_angle> * -1) slashdrop = <slashdrop>}
endscript

script SkateIn_Left \{rot_angle = 90}
	setlandedfromvert
	setstate \{ground}
	spawnterrainsound \{action = roll}
	orienttonormal
	rotate y = <rot_angle> duration = 0.2 seconds
	OnGroundExceptions_NoOllieAfterEndofRun
	cleareventhandler \{groundgone}
	onexceptionrun \{SkateInOrBail_Out}
	setqueuetricks \{NoTricks}
	setmanualtricks \{NoTricks}
	SetExtraTricks_Reverts
	NoRailTricks
	goto SkateInLand params = {slashdrop = <slashdrop>}
endscript

script SkateIn_Bail 
	if flipped
		if (<dir> = left)
			dir = forward
		else
			dir = backward
		endif
	else
		if (<dir> = left)
			dir = backward
		else
			dir = forward
		endif
	endif
	if NOT gotparam grindbail
		getsingletag grindbail
	endif
	if gotparam grindbail
		goto <grindbail> params = {dir = <dir>}
	else
		goto FiftyFiftyFall params = {dir = <dir>}
	endif
endscript

script SkateInLand RevertTime = 10
	setstate ground
	onexceptionrun SkateInLandOut
	nollieoff
	vibrate actuator = 1 percent = 80 duration = 0.1
	if NOT gotparam no_land_anim
		blend_in_below_body_ik blendduration = 0.05 strength = 1.0
		onexitrun blend_in_below_body_ik params = {blendduration = 0.05 strength = 0.0}
		Skater_PlayOnGroundAnim
	endif
	begin
	DoNextTrick
	wait 1 gameframe
	repeat <RevertTime>
	if gotparam slashdrop
		onexitrun
		onexceptionrun
		post_carve_or_slash_trick_checker
		return
	endif
	landskatertricks
	OnGroundExceptions_NoOllieAfterEndofRun
	setmanualtricks NoTricks
	if NOT gotparam no_land_anim
		Skater_WaitAnim percent = 10
	endif
	OnGroundExceptions
	CheckforNetBrake
	if NOT gotparam no_land_anim
		WaitAnimWhilstChecking AndManuals
	endif
	goto ongroundai
endscript

script SkateInLandOut 
	AllowRailTricks
	landskatertricks
endscript

script SkateInOrBail_Out 
	killextratricks
	if NOT inair
		printf " =================================== LAND =================================="
		landskatertricks
	endif
	resetlandedfromvert
	printf " =================================== NO VERT =================================="
endscript

script Grind GrindTweak = 7 InitSpeed = 1.0 sparkspos = rear
	if getsingletag GrindPlayCavemanAnim
		removetags tags = [GrindPlayCavemanAnim]
		Skater_PlayOllieAnim $Ollie_data
		Skater_PlayFlipTrickAnim $caveman_data
		Skater_WaitAnim timer = FliptrickTimer percent = 40
		no_ollie_landings = 1
	endif
	obj_gettype
	if (<objtype> = object_type_ped)
		goto Ped_Skater_BeginGrind params = <...>
		return
	endif
	if NOT onrail
		if NOT onstall
			goto Airborne
		endif
	endif
	if gotparam isatap
		isatap = 1
	endif
	if gotparam AnimOnly
		Skater_PlayGrindAnim <AnimData> sync = <sync> isextra = <isextra> isatap = <isatap>
		return
	endif
	killextratricks
	if lastwallridelessthan 100
		NoBlend = NoBlend
	endif
	if bailison
		setstate air
		goto DoingTrickBail
	endif
	if innetgame
		if bailison
			setstate air
			goto DoingTrickBail
		endif
	endif
	if innollie
		was_in_nollie = 1
	endif
	if NOT gotparam backwardscript
		backwardscript = none
	endif
	setbackwardsgrindvalues scriptname = <backwardscript> anim = (<AnimData>.trans_anim)
	if shouldrunstallscript
		GotoPreserveParams StallTrick
	endif
	if gotparam isextra
		LaunchExtraMessage
		if onstall
			GotoPreserveParams StallTrick
		endif
	endif
	bailoff
	cancelrotatedisplay
	if NOT gotparam isextra
		if NOT firsttimeonthisrail
			printf "rerail cheese"
			AdjustBalance TimeAdd = 2 speedmult = 2 leanmult = 2.0
		endif
	endif
	LaunchStateChangeEvent state = Skater_OnRail
	if NOT gotparam isatap
		if NOT gotparam isextra
			if gotparam extratricks
				if checksumequals a = <extratricks> b = Extra_BS_Grinds
					setextratricks GrindTaps_BS
				else
					setextratricks GrindTaps_FS
				endif
			endif
		endif
	endif
	settags {
		OutAnim = <OutAnim>
		InitAnim = <InitAnim>
		InitSpeed = <InitSpeed>
		anim = <anim>
		OneFoot = <OneFoot>
		varial_script = <varial_script>
		fs_bv_in = (<AnimData>.fs_bv_in)
		fs_bv_out = (<AnimData>.fs_bv_out)
		bs_bv_in = (<AnimData>.bs_bv_in)
		bs_bv_out = (<AnimData>.bs_bv_out)
		fs_bv_in_curve = (<AnimData>.fs_bv_in_curve)
		fs_bv_out_curve = (<AnimData>.fs_bv_out_curve)
		bs_bv_in_curve = (<AnimData>.bs_bv_in_curve)
		bs_bv_out_curve = (<AnimData>.bs_bv_out_curve)
		one_foot_anim = (<AnimData>.one_foot_anim)
		grab_mod_anim = (<AnimData>.grab_mod_anim)
	}
	settrickname ""
	settrickscore 0
	display blockspin
	obj_clearflag $FLAG_SKATER_MANUALCHEESE
	obj_clearflag $FLAG_SKATER_REVERTCHEESE
	if gotparam SwitchBoardOff
		SwitchOffBoard
	endif
	if gotparam isspecial
		broadcastevent type = SkaterEnterSpecialTrick
		onexitrun Exit_Special_Grind
	else
		onexitrun Exit_Grind
	endif
	if gotparam SpecialSounds
		obj_spawnscriptlater <SpecialSounds>
	endif
	cleareventhandlergroup `default`
	onexceptionrun
	if gotparam fshurricanehack
		seteventhandler event = Ollied scr = fshurricaneollieexit response = switch_script params = {Nollie = <Nollie>}
	else
		if gotparam Nollie
			seteventhandler event = Ollied scr = NollieNoDisplay response = switch_script
		else
			if gotparam OutAnimOnOllie
				seteventhandler event = Ollied scr = ollie response = switch_script params = {<...>}
			else
				seteventhandler event = Ollied scr = ollie response = switch_script
			endif
		endif
	endif
	if gotparam Nollie
		nollieon
	else
		nollieoff
	endif
	if NOT gotparam type
		script_assert "No type specified on grind trick"
	endif
	if (<type> = Grind)
		spawnterrainsound action = grindon
	else
		setrailsound slide
		spawnterrainsound action = slideon
	endif
	seteventhandler event = OffRail scr = OffRail response = switch_script params = {KissedRail name = <name> InitAnim = <InitAnim> InitSpeed = <InitSpeed> OutAnim = <OutAnim> boardrotate = <boardrotate> OutAnimBackwards = <OutAnimBackwards> fshurricanehack = <fshurricanehack>}
	seteventhandler event = landed scr = Grind_to_Land response = switch_script
	seteventhandler event = offmetertop scr = SkateInOrBail response = switch_script params = {<...> FallingLeft}
	seteventhandler event = offmeterbottom scr = SkateInOrBail response = switch_script params = {<...> Fallingright}
	seteventhandler event = skatercollidebail scr = skatercollidebail response = switch_script
	seteventhandler event = madeotherskaterbail scr = MadeOtherSkaterBail_Called response = call_script
	onexceptionrun Grind_Kissed
	cleartrickqueue
	clearmanualtrick
	clearextragrindtrick
	setqueuetricks NoTricks
	setmanualtricks NoTricks
	setrailsound <type>
	body_check_set_tricks state = Grind
	if gotparam isspecial
		setgrindtweak 36
		<score> = $SPECIALGRIND_SCORE
	else
		if gotparam isatap
			setgrindtweak $GRINDTAP_TWEAK
			<score> = $GRINDTAP_SCORE
		else
			setgrindtweak <GrindTweak>
		endif
	endif
	if gotparam profile
		if profileequals is_named = <profile>
			switchonatomic special_item
			switchoffatomic special_item_2
		endif
	endif
	if gotparam FullScreenEffect
		<FullScreenEffect>
		onexitrun Exit_FullscreenEffect
	endif
	if gotparam TrickSpawnscript
		settags spawn_to_kill = <TrickSpawnscript>
		obj_spawnscriptlater <TrickSpawnscript>
	endif
	if gotparam isextra
		sync = 1
		isextra = 1
	else
		sync = 0
	endif
	if gotparam was_in_nollie
		wait 1 gameframe
	endif
	if NOT gotparam no_anim
		Skater_PlayGrindAnim <AnimData> sync = <sync> isextra = <isextra> no_ollie_landings = <no_ollie_landings> isatap = <isatap>
	endif
	if gotparam isatap
		dobalancetrick buttona = right buttonb = left type = <type> doflipcheck isatap
	else
		if gotparam isextra
			dobalancetrick buttona = right buttonb = left type = <type> doflipcheck isatap
		else
			dobalancetrick buttona = right buttonb = left type = <type> doflipcheck
		endif
	endif
	apply_acid_drop_cheese
	wait 15 frames
	setextratricks GrindRelease GrindMods
	setsparkspos <sparkspos>
	if (<type> = Grind)
		TurnSparksOff
		TurnSparksOn
	else
		TurnSparksOff
		TurnSparksOn type = slide
	endif
	wait 1 frame
	if gotparam isspecial
		LaunchSpecialMessage text = "Special Grind"
	endif
	seteventhandler event = OffRail scr = OffRail response = switch_script params = {InitAnim = <InitAnim> InitSpeed = <InitSpeed> OutAnim = <OutAnim> boardrotate = <boardrotate> OutAnimBackwards = <OutAnimBackwards> fshurricanehack = <fshurricanehack>}
	onexceptionrun Normal_Grind
	settrickname <name> root_name = <rootname>
	settrickscore <score>
	display blockspin nospecial = <nospecial>
	if gotparam fshurricanehack
		flipafter
	endif
	wait 0.3 seconds
	if gotparam extratricks
		if gotparam fshurricanehack
			skater_waitanimfinished timer = LandTimer
		endif
		setextratricks <extratricks> ignore = <name> GrindRelease GrindMods
	else
		setextratricks GrindRelease GrindMods
	endif
	if gotparam specialtrick_particles
		printf "Going to emit particles ........................."
		Emit_SpecialTrickParticles specialitem_particles = <specialitem_particles>
	endif
	WaitWhilstChecking_ForPressure <...>
endscript

script apply_acid_drop_cheese 
	getsingletag \{AcidDropCheese}
	if gotparam \{AcidDropCheese}
		if (<AcidDropCheese> > 0)
			printf "ACID DROP CHEESE ================== %i" i = <AcidDropCheese>
			AdjustBalance \{TimeAdd = 0
				speedmult = 2
				leanmult = 3.2}
			removetags \{tags = [
					AcidDropCheese
				]}
		endif
	endif
endscript

script fshurricaneollieexit 
	BlendperiodOut \{0.0}
	flipafter
	if gotparam \{Nollie}
		NollieNoDisplay
	else
		ollie
	endif
endscript

script Grind_to_Land 
	stopbalancetrick
	goto \{land}
endscript

script Exit_FullscreenEffect 
	<skaterlights_target> = (tod_skaterlights)
	SetFogColor \{r = fog_red
		b = fog_blue
		g = fog_green
		a = fog_alpha}
	SetFogDistance \{distance = fog_dist}
	KillManualVibration
	Exit_Grind
endscript

script Exit_FullScreenEffect_and_Special 
	broadcastevent \{type = SkaterExitSpecialTrick}
	Exit_FullscreenEffect
endscript

script Exit_Grind 
	SwitchOnBoard
	CleanUp_SpecialTrickParticles
	getsingletag \{spawn_to_kill}
	if gotparam \{spawn_to_kill}
		obj_killspawnedscript name = <spawn_to_kill>
	endif
endscript

script Exit_Special_Grind 
	Exit_Special
	Exit_Grind
endscript

script Exit_Special 
	broadcastevent \{type = SkaterExitSpecialTrick}
endscript

script Grind_ScreenShake 
	BloodSplat
	soundevent \{event = grind_shake_camera_sfx}
	ShakeCamera \{duration = 0.5
		vert_amp = 0.225
		horiz_amp = 0.075
		vert_vel = 10.2699995
		horiz_vel = 5.92}
endscript
grindwobble_params = {
	wobbleampa = {
		(0.1, 0.1)
		STATS_RAILBALANCE
	}
	wobbleampb = {
		(0.04, 0.04)
		STATS_RAILBALANCE
	}
	wobblek1 = {
		(0.0022, 0.0022)
		STATS_RAILBALANCE
	}
	wobblek2 = {
		(0.0017, 0.0017)
		STATS_RAILBALANCE
	}
	spazfactor = {
		(1.5, 1.5)
		STATS_RAILBALANCE
	}
}

script Grind_Kissed 
	if gotparam \{madeotherskaterbail}
	else
		killextratricks
	endif
	settrickname \{""}
	settrickscore \{0}
	display \{blockspin}
	obj_killspawnedscript \{name = CheckForShuffle}
	obj_spawnscriptlater \{CheckForShuffle}
endscript

script CheckForShuffle 
	seteventhandler \{event = SkaterEnterRail
		scr = Awardshuffle
		response = switch_script}
	wait \{15
		frames}
endscript

script Awardshuffle 
	settrickname \{""}
	settrickscore \{100}
	display \{blockspin
		nodegrade}
	if NOT insplitscreengame
		ui_display_message \{type = alert
			text = "Shuffle Bonus +100 Points"
			color = green}
	else
		PerfectSloppy_2p \{text = "Shuffle!"
			rgb = [
				100
				240
				100
				255
			]}
	endif
endscript

script Normal_Grind 
	if gotparam \{madeotherskaterbail}
	else
		killextratricks
	endif
	switchoffatomic \{special_item}
	switchonatomic \{special_item_2}
endscript

script OffRail InitSpeed = 1.0
	if gotparam KissedRail
		formattext textname = new_name "%n bash" n = <name>
		settrickscore 50
		settrickname <new_name>
		display blockspin nomult
	endif
	stopbalancetrick
	killextratricks
	vibrate actuator = 0 percent = 0
	setstate air
	seteventhandler event = landed scr = land response = switch_script
	seteventhandler event = wallrideleft scr = wallride response = switch_script params = {left}
	seteventhandler event = wallrideright scr = wallride response = switch_script params = {right}
	seteventhandler event = Wallplant scr = Air_WallPlant response = switch_script
	DoNextTrick
	TurnSparksOff
	if gotparam boardrotate
		printf "Setting blendperiod out.................."
		BlendperiodOut 0
		boardrotateafter
	endif
	if gotparam flipafter
		printf "flipping.................."
		flipafter
	endif
	if gotparam fshurricanehack
		flipafter
		BlendperiodOut 0
	endif
	Skater_PlayOllieAnim $Ollie_data groundgone = 1
	wait 10 gameframes
	goto Airborne params = {no_anim = 1}
endscript

script Trick_OneFooter 
	gettags
	return
	if NOT onrail
		if NOT onstall
			goto Airborne
		endif
	endif
	switch <OneFoot>
		case front
		anim = FiftyFifty_FrontFootUp
		blendtime = 0.3
		case back
		anim = FiftyFifty_BackFootUp
		blendtime = 0.3
		case board
		anim = BSBoardslide_RightFootUp
		blendtime = 0.1
		case FSBoard
		anim = FSBoardslide_RightFootUp
		blendtime = 0.1
		default
		printf "no onefoot tag"
		return
	endswitch
	removetags tags = [OneFoot]
	Skater_PlayOneFooterAnim anim = <anim> cycle blendtime = <blendtime>
	gettrickname
	formattext textname = trick_text "One Footed %t" t = <trick_name>
	setgrindtweak $GRINDTAP_TWEAK
	settrickname <trick_text>
	settrickscore 100
	display
	LaunchExtraMessage
	SpawnSkaterScript wait_for_onefooter
endscript

script wait_for_onefooter 
	skater_waitanimfinished
	Skater_OneFooterAnimOff
endscript

script BackwardsGrind 
	rotate
	boardrotateafter
	goto <Grind> params = {NoBlend = yes rootname = <rootname>}
endscript

script pointrail 
	if bailison
		setstate \{air}
		goto \{DoingTrickBail}
	endif
	Skater_PlayOllieAnim \{$Footplant_data}
	vibrate \{actuator = 0
		percent = 50
		duration = 0.1}
	obj_spawnscriptlater \{PointRailSparks}
	broadcastevent \{type = SkaterPointRail}
	settrickname \{"Foot Plant"}
	settrickscore \{50}
	display \{nomult}
	goto \{Airborne
		params = {
			AllowVibration
			no_anim
		}}
endscript

script pointrailspin init_anim = Sk8_natas_Spin_In_F range_anim = Sk8_natas_Spin_Range_F
	if bailison
		setstate air
		goto DoingTrickBail
	endif
	cleareventhandlergroup `default`
	onexceptionrun
	seteventhandler event = Ollied scr = ExitPointRailSpin response = switch_script
	seteventhandler event = offmetertop scr = PointRailSpinBail response = switch_script
	seteventhandler event = offmeterbottom scr = PointRailSpinBail response = switch_script
	seteventhandler event = skatercollidebail scr = skatercollidebail response = switch_script
	setrailsound slide
	spawnterrainsound action = nadason
	ClearTrickQueues
	setqueuetricks NatasTricks
	if skaterisnamed natas
		init_anim = special_natas_spin_init
		range_anim = special_natas_spin_range
	endif
	skater_playanim anim = <init_anim>
	skater_waitanimfinished
	if NOT onrail
		goto Airborne
	endif
	LaunchStateChangeEvent state = Skater_OnRail
	dobalancetrick buttona = right buttonb = left type = Grind
	skater_playanim anim = <range_anim> wobble
	settrickname ""
	settrickscore 0
	display blockspin
	settrickname "Natas Spin"
	settrickscore 50
	display natas
	SkaterParticles_CreateNatasGfx
	onexitrun Natas_Exit
	begin
	DoNextTrick
	wait 1 gameframe
	addtocumulativerecord ability = natas use_time
	repeat
endscript
NatasTricks = [
	{
		trigger = {
			InOrder
			a = circle
			b = circle
			300
		}
		scr = Trick_Natas_1
	}
	{
		trigger = {
			InOrder
			a = square
			b = square
			300
		}
		scr = Trick_Natas_2
	}
	{
		trigger = {
			InOrder
			a = triangle
			b = triangle
			300
		}
		scr = Trick_Natas_3
	}
]
NatasExitTricks1 = [
	{
		trigger = {
			InOrder
			a = circle
			b = circle
			300
		}
		scr = Trick_Natas_1_exit
	}
	{
		trigger = {
			InOrder
			a = square
			b = square
			300
		}
		scr = Trick_Natas_1_exit
		params = {
			callback = Trick_Natas_2
		}
	}
	{
		trigger = {
			InOrder
			a = triangle
			b = triangle
			300
		}
		scr = Trick_Natas_1_exit
		params = {
			callback = Trick_Natas_3
		}
	}
]
NatasExitTricks2 = [
	{
		trigger = {
			InOrder
			a = square
			b = square
			300
		}
		scr = Trick_Natas_2_exit
	}
	{
		trigger = {
			InOrder
			a = circle
			b = circle
			300
		}
		scr = Trick_Natas_2_exit
		params = {
			callback = Trick_Natas_1
		}
	}
	{
		trigger = {
			InOrder
			a = triangle
			b = triangle
			300
		}
		scr = Trick_Natas_2_exit
		params = {
			callback = Trick_Natas_3
		}
	}
]
NatasExitTricks3 = [
	{
		trigger = {
			InOrder
			a = triangle
			b = triangle
			300
		}
		scr = Trick_Natas_3_exit
	}
	{
		trigger = {
			InOrder
			a = circle
			b = circle
			300
		}
		scr = Trick_Natas_3_exit
		params = {
			callback = Trick_Natas_1
		}
	}
	{
		trigger = {
			InOrder
			a = square
			b = square
			300
		}
		scr = Trick_Natas_3_exit
		params = {
			callback = Trick_Natas_2
		}
	}
]

script Trick_Natas_1 
	Trick_Natas_General \{init_anim = Sk8_natas_Hstand_In_F
		idle_anim = Sk8_natas_Hstand_Range_F
		name = "Handstand Spin"
		score = 300
		exit_tricks = NatasExitTricks1}
endscript

script Trick_Natas_1_exit 
	Trick_Natas_General_exit {
		out_anim = Sk8_natas_Hstand_Out_F
		callback = <callback>
	}
endscript

script Trick_Natas_2 
	Trick_Natas_General \{init_anim = Sk8_natas_OneFoot_In_F
		idle_anim = Sk8_natas_OneFoot_Range_F
		name = "One Foot Spin"
		score = 300
		exit_tricks = NatasExitTricks2}
endscript

script Trick_Natas_2_exit 
	Trick_Natas_General_exit {
		out_anim = Sk8_natas_OneFoot_Out_F
		callback = <callback>
	}
endscript

script Trick_Natas_3 
	Trick_Natas_General \{init_anim = Sk8_natas_Lhold_In_F
		idle_anim = Sk8_natas_Lhold_Range_F
		name = "L Spin"
		score = 300
		exit_tricks = NatasExitTricks3}
endscript

script Trick_Natas_3_exit 
	Trick_Natas_General_exit {
		out_anim = Sk8_natas_Lhold_Out_F
		callback = <callback>
	}
endscript

script Trick_Natas_General 
	if NOT onrail
		goto ongroundai
	endif
	onexitrun Natas_Exit
	skater_playanim anim = <init_anim>
	skater_waitanimfinished
	settrickname ""
	settrickscore 0
	display blockspin
	natasresetrotation
	skater_playanim anim = <idle_anim> wobble
	settrickname <name>
	settrickscore <score>
	display natas
	ClearTrickQueues
	setqueuetricks <exit_tricks>
	LaunchExtraMessage
	begin
	DoNextTrick
	wait 1 gameframe
	addtocumulativerecord ability = natas use_time
	repeat
endscript

script Trick_Natas_General_exit 
	onexitrun Natas_Exit
	natasresetrotation
	skater_playanim anim = <out_anim>
	skater_waitanimfinished
	if gotparam callback
		goto <callback>
	endif
	settrickname ""
	settrickscore 0
	display blockspin
	skater_playanim anim = Sk8_natas_Spin_Range_F wobble
	settrickname "Natas Spin"
	settrickscore 300
	display natas
	ClearTrickQueues
	setqueuetricks NatasTricks
	begin
	DoNextTrick
	wait 1 gameframe
	repeat
endscript

script Natas_Exit 
	vibrate \{actuator = 0
		percent = 0}
	settrickname \{""}
	settrickscore \{0}
	display \{blockspin}
endscript
natas_exit_speed = 7.5

script ExitPointRailSpin \{stall = false}
	stopbalancetrick
	NoRailTricks
	ClearTrickQueues
	obj_killspawnedscript \{name = turn_on_rail_tricks}
	obj_spawnscriptlater \{turn_on_rail_tricks}
	checknatasexitdirection stall = <stall> vel = $natas_exit_speed
	jump
	DoNextTrick
	if NOT gotparam \{stall}
		OutAnim = Sk8_natas_Spin_Out_F
	endif
	ollie OutAnim = <OutAnim> blendout = 0.1 jumpspeed = 0
endscript

script turn_on_rail_tricks \{time = 10}
	wait <time> frames
	AllowRailTricks
endscript

script PointRailSpinBail 
	printf \{channel = bail
		"Natas Bail"}
	MakeSkaterGoto \{Bail_NoInit}
endscript

script PointRailSparks 
	obj_getid
	obj_getvelocity
	normalizevector <vel>
	getuniquecompositeobjectid \{preferredid = PointRailSparks01}
	createparticlesystem name = <uniqueid> objid = <objid> bone = bone_board_deck params_script = {$GP_Point_Rail_Sparks01 emit_target = (-1 * <norm>)}
endscript

script flip_grinding_backwards 
	if (<scriptname> = none)
		return
	endif
	MakeSkaterGoto flip_grinding_backwards2 params = {trick_script = <scriptname> anim = <anim>}
endscript

script flip_grinding_backwards2 
	seteventhandler \{event = OffRail
		scr = OffRail
		response = switch_script}
	skater_playanim anim = <anim>
	skater_waitanimfinished
	<trick_script> isextra = isextra
endscript

script Grind_BodyVarial time = 0.5
	if NOT flipped
		if (<angle> > 0)
			backside = 0
		else
			backside = 1
		endif
	else
		if (<angle> < 0)
			backside = 0
		else
			backside = 1
		endif
	endif
	if (<backside> = 1)
		getsingletag bs_bv_in
		getsingletag bs_bv_out
		getsingletag bs_bv_in_curve
		getsingletag bs_bv_out_curve
		in_anim = <bs_bv_in>
		out_anim = <bs_bv_out>
		in_curve = <bs_bv_in_curve>
		out_curve = <bs_bv_out_curve>
	else
		getsingletag fs_bv_in
		getsingletag fs_bv_out
		getsingletag fs_bv_in_curve
		getsingletag fs_bv_out_curve
		in_anim = <fs_bv_in>
		out_anim = <fs_bv_out>
		in_curve = <fs_bv_in_curve>
		out_curve = <fs_bv_out_curve>
	endif
	killextratricks
	disablebalanceinput
	doscreenelementmorph id = the_balance_meter time = 0 alpha = 0.2
	onexitrun Grind_BodyVarial_exit
	anim_getanimlength anim = <out_anim>
	Skater_PlayGrindExtraAnim anim = <out_anim> tree = $GrindExtrasTimed_AnimBranch blendcurve = <in_curve> blendduration = <length> no_blend
	skater_waitanimfinished timer = grindextratimer
	getsingletag varial_script
	if gotparam varial_script
		flipafter
		boardrotateafter
		<varial_script> {isextra = 1 sync = 1 AnimOnly = 1}
	endif
	Grind_BodyVarial_exit
	onexitrun
	anim_getanimlength anim = <in_anim>
	Skater_PlayGrindExtraAnim anim = <in_anim> tree = $GrindExtrasTimed_AnimBranch blendcurve = <out_curve> blendduration = <length> no_blend
	skater_waitanimfinished timer = grindextratimer
	settrickname <name>
	settrickscore 100
	display
	if gotparam varial_script
		goto <varial_script> params = {isextra = 1 sync = 1 no_anim = 1}
	endif
endscript

script Grind_BodyVarial_exit 
	enablebalanceinput
	if screenelementexists \{id = the_balance_meter}
		doscreenelementmorph \{id = the_balance_meter
			time = 0
			alpha = 1.0}
	endif
endscript

script Grind_Modifier 
	settrickname <name>
	settrickscore 0
	display
	if (<button> = square)
		tweak = 35
		angle = 2000
		scale = (0.3, 0.6)
		getsingletag one_foot_anim
		anim = <one_foot_anim>
		if NOT gotparam anim
			anim = sk8_Rail_5050_range_1ft_D
		endif
	else
		tweak = 20
		angle = 3000
		scale = (0.45000002, 0.6)
		getsingletag grab_mod_anim
		anim = <grab_mod_anim>
		if NOT gotparam anim
			anim = sk8_Rail_5050_range_grb_D
		endif
	endif
	setgrindtweak <tweak>
	Skater_PlayGrindExtraAnim anim = <anim> blendcurve = [0 , 1]
	onexitrun Grind_Modifier_exit
	begin
	if NOT held <button>
		break
	endif
	wait 1 gameframe
	repeat
endscript

script Grind_Modifier_exit 
	setgrindtweak \{7}
	Skater_BlankGrindExtraAnim \{blendduration = 0.3}
endscript
slashgrind_tricks = [
	{
		trigger = {
			Press
			l1
			20
		}
		scr = slashgrind
		params = {
			dir = left
		}
	}
	{
		trigger = {
			Press
			r1
			20
		}
		scr = slashgrind
		params = {
			dir = right
		}
	}
]

script slashgrind 
	LaunchStateChangeEvent state = Skater_InSlashGrind
	cleareventhandlergroup `default`
	ClearTrickQueues
	seteventhandler event = OffRail scr = groundgone response = switch_script params = {}
	seteventhandler event = Ollied scr = ollie response = switch_script
	killextratricks
	setextratricks slashgrind_tricks
	stopbalancetrick
	onexitrun slashgrindexit
	if gotparam dir
		if NOT skaterprofile_isabilityactive ability = bowl_slash_switchup
			return
		endif
		getslashgrindstate
		prev_state = <slash_state>
		if slashgrindswitchup dir = <dir>
			getslashgrindstate
			if flipped
				if (<dir> = left)
					dir = right
				else
					dir = left
				endif
			endif
			if (<dir> = left)
				switch <slash_state>
					case Grind
					trans_anim = Sk8_Slash_L_FSbrdto5050_D
					case backgrind
					trans_anim = Sk8_Slash_L_BSbrdto5050_D
					case slide
					trans_anim = Sk8_Slash_L_5050toBSbrd_D
					case backslide
					trans_anim = Sk8_Slash_L_5050toFSbrd_D
				endswitch
			else
				switch <slash_state>
					case Grind
					trans_anim = Sk8_Slash_R_BSbrdto5050_D
					case backgrind
					trans_anim = Sk8_Slash_R_FSbrdto5050_D
					case slide
					trans_anim = Sk8_Slash_R_5050toBSbrd_D
					case backslide
					trans_anim = Sk8_Slash_R_5050toFSbrd_D
				endswitch
			endif
			Skater_PlayGrindExtraAnim anim = <trans_anim> tree = $GrindExtrasTimed_AnimBranch
		endif
	else
		getslashgrindstate
	endif
	if flipped
		switch <slash_state>
			case slide
			slash_state = backslide
			case backslide
			slash_state = slide
		endswitch
	endif
	switch <slash_state>
		case Grind
		data = $slash5050_data
		name = "Slash Grind 50-50"
		action = grindon
		case backgrind
		data = $slash5050_data
		name = "Slash Grind 50-50"
		action = grindon
		case slide
		data = $slashBoardslide_data
		name = "Slash Grind Boardslide"
		action = slideon
		seteventhandler event = OffRail scr = slashboard_offrail response = switch_script params = {}
		case backslide
		data = $slashBackwardBoardslide_data
		name = "Slash Grind FS Boardslide"
		action = slideon
		seteventhandler event = OffRail scr = slashboard_offrail response = switch_script params = {}
		default
		printf "bad slashgrind state %f" f = <slash_state>
		return
	endswitch
	if gotparam dir
		Skater_WaitAnim timer = grindextratimer percent = 50
		spawnterrainsound action = <action>
		skater_waitanimfinished timer = grindextratimer
	else
		spawnterrainsound action = <action>
	endif
	Skater_PlayGrindAnim <data> isextra = 1
	settrickname <name>
	settrickscore 100
	setgrindtweak 50
	display blockspin
	begin
	wait 1 gameframe
	repeat
endscript

script slashgrindexit 
	killextratricks
endscript

script slashboard_offrail 
	rotate \{y = -90
		duration = 0.3
		seconds}
	goto \{groundgone}
endscript
